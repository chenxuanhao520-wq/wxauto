# 📚 项目完整变更日志（自 v1.0 起）

本文件汇总项目自 v1.0.0 起至当前版本 v3.2 的关键变更，来源于现有 `CHANGELOG.md`、`CHANGELOG_MCP.md` 与本次交付内容。建议将该文件作为对外发布与内部回溯的统一基线。

---

## [3.2.0] - 2025-10-20

### ✨ 新特性
- 架构优化 Phase 1 完成：
  - 启用 SQLite WAL 模式，写不阻塞读，并发能力显著提升
  - 离线队列容量限制（FIFO），防止无限膨胀
  - 原子性文件写入，避免队列文件损坏
  - 环境变量校验脚本，启动前检查关键密钥
- ERP 工具与数据导出：
  - 获取全量客户列表并导出 CSV/JSON（239 条）
  - 客户字段分析、telord/ord 字段洞察
  - 指定客户详情查询（示例：ord=572）

### 🛠 改进
- README 升级至 v3.2，新增本次架构优化摘要与链接
- 系统架构深度分析与实施计划、完成报告文档化

### 🐛 修复
- 修复 config.yaml 中 YAML 语法错误（清理残留 llm 段落与错误换行）

### 🔥 破坏性变更
- 无

---

## [2.1.0] - 2024-12（MCP 中台集成）

来源：`CHANGELOG_MCP.md`

### ✨ 重大更新
- 新增 MCP 中台（`modules/mcp_platform/`）：统一管理 AIOCR、Sequential Thinking、后续服务
- AIOCR 文档识别与文档转 Markdown 工具，上线并集成到知识库与消息图片识别链路
- Sequential Thinking（结构化思考/问题分解/决策分析/创意头脑风暴）
- Cursor MCP 配置与使用指南，支持在 Cursor 中直接调用 MCP 服务

### 🛠 改进
- 知识库 `document_processor.py` 支持优先走 MCP AIOCR，失败自动回退
- 消息服务集成 AIOCR，图片/文件识别结果加入上下文
- README 与多份文档完善

### 🧪 测试
- 覆盖 MCP 初始化、服务调用、知识库与消息集成、Cursor 配置测试

---

## [2.0.0] - 2025-01-19

来源：`CHANGELOG.md`

### 🏗️ 架构重大升级（C/S 分离）
- 轻量级 Windows 客户端：UI 自动化、AES-256 缓存、心跳、离线队列
- FastAPI 服务端：REST、JWT、消息服务、心跳、统计
- Docker 化部署：PostgreSQL + Redis（规划）
- 统一系统监控与性能优化、自动学习系统

### 🛠 改进
- 代码大幅重构与模块化、文档与测试覆盖度提升

---

## [1.3.0] - 2025-01-18

来源：`CHANGELOG.md`

### ✨ 新增
- 智能对话上下文管理：对话类型分类、动态窗口、Token 节省 75%+
- 会话生命周期管理：多级超时策略、智能会话恢复
- ERP 集成：智邦国际 ERP 对接、双向同步、规则引擎

---

## [1.2.0] - 2025-01-15

来源：`CHANGELOG.md`

### ✨ 新增
- 客户中台：分级、状态机、触发器
- 多维表格集成：飞书、钉钉

---

## [1.1.0] - 2025-01-10

来源：`CHANGELOG.md`

### ✨ 新增
- 知识库 RAG 检索、7 个 AI 模型支持、对话追踪

---

## [1.0.0] - 2025-01-05

来源：`CHANGELOG.md`

### 🚀 初始版本
- 基础微信自动化、消息去重、速率限制、SQLite 数据库

---

## 📌 附录：关联文档与里程碑
- 系统架构分析报告.md
- ARCHITECTURE_OPTIMIZATION_PLAN.md
- 📈系统架构优化完成报告.md
- 🎉v3.2_架构优化总结.md
- 🎊MCP中台优化最终完成报告.md
- 🎉智邦ERP_MCP集成完成报告.md

> 注：如需补充具体发布日期与提交号，请以 Git 提交历史与实际发布节点为准。
