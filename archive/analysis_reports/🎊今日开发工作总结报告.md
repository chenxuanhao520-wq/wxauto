# ğŸŠ ä»Šæ—¥å¼€å‘å·¥ä½œæ€»ç»“æŠ¥å‘Š

**æ—¥æœŸ**: 2025-01-19  
**å¼€å‘æ—¶é•¿**: å®Œæ•´å·¥ä½œæ—¥  
**æäº¤æ¬¡æ•°**: 1æ¬¡ï¼ˆ45ä¸ªæ–‡ä»¶ï¼‰  
**ä»£ç è¡Œæ•°**: ~17,884è¡Œï¼ˆæ’å…¥ï¼‰

---

## ğŸ“‹ å®Œæˆçš„æ ¸å¿ƒåŠŸèƒ½

### 1. KBä¸­å° - æè‡´è´¨é‡æ–¹æ¡ˆ â­â­â­â­â­

#### æ ¸å¿ƒæ¨¡å—ï¼ˆ13ä¸ªæ–‡ä»¶ï¼Œ~3000è¡Œï¼‰

**å®Œæ•´ETLæµç¨‹**ï¼š
```
Extractï¼ˆæå–ï¼‰â†’ Validateï¼ˆéªŒè¯ï¼‰â†’ Transformï¼ˆè½¬æ¢ï¼‰
â†’ Qualityï¼ˆè´¨é‡ï¼‰â†’ Duplicateï¼ˆé‡å¤ï¼‰â†’ Loadï¼ˆåŠ è½½ï¼‰
```

**ä¸¥æ ¼æ ¼å¼çº¦æŸ**ï¼š
- äº§å“ä¿¡æ¯æ–‡æ¡£ï¼š5ä¸ªå¿…è¦å­—æ®µ
- FAQæ–‡æ¡£ï¼š2ä¸ªå¿…è¦ + 4ä¸ªæ¨èå­—æ®µ
- æ“ä½œæ–‡æ¡£ï¼š4ä¸ªå¿…è¦ + 4ä¸ªæ¨èå­—æ®µ

**æ ¸å¿ƒæ–‡ä»¶**ï¼š
- `modules/kb_platform/core/quality_controller.py` - è´¨é‡æ§åˆ¶å™¨
- `modules/kb_platform/etl/document_etl_pipeline.py` - ETLæµæ°´çº¿
- `modules/kb_platform/etl/structure_validator.py` - ç»“æ„éªŒè¯å™¨ï¼ˆ3ä¸ªæ¨¡æ¿ï¼‰
- `modules/kb_platform/etl/format_normalizer.py` - æ ¼å¼æ ‡å‡†åŒ–
- `modules/kb_platform/processors/duplicate_detector.py` - é‡å¤æ£€æµ‹
- `modules/kb_platform/updaters/dynamic_kb_updater.py` - åŠ¨æ€æ›´æ–°å™¨

**æŠ€æœ¯æ ˆ**ï¼š
- pandasï¼ˆExcel/CSVå¤„ç†ï¼‰
- pdfminerï¼ˆPDFè§£æï¼‰
- python-docxï¼ˆWordæ–‡æ¡£ï¼‰
- BeautifulSoupï¼ˆHTMLè§£æï¼‰
- difflibï¼ˆæ–‡æœ¬å·®å¼‚ï¼‰
- gensimï¼ˆè¯­ä¹‰ç›¸ä¼¼åº¦ï¼‰

**é¢„æœŸæ•ˆæœ**ï¼š
- å¹³å‡è´¨é‡åˆ†: 0.45 â†’ 0.85 (+89%)
- æ–‡æ¡£æ¥å—ç‡: 50% â†’ 85%
- é‡å¤å†…å®¹ç‡: 15% â†’ 2%
- æ£€ç´¢ç²¾åº¦: 80% â†’ 90%

---

### 2. å…è´¹å‘é‡å‡çº§ - Reranker â­â­â­â­â­

#### BGEé‡æ’åºå™¨

**æ ¸å¿ƒæ–‡ä»¶**ï¼š
- `modules/kb_platform/reranker/bge_reranker.py`
- `install_kb_platform.sh/bat`

**åŠŸèƒ½**ï¼š
- ç²—æ’ï¼ˆå‘é‡æ£€ç´¢100æ¡ï¼‰â†’ ç²¾æ’ï¼ˆé‡æ’åº10æ¡ï¼‰
- æå‡Top10å‡†ç¡®ç‡

**æ•ˆæœ**ï¼š
- æ£€ç´¢ç²¾åº¦: +10%
- å¬å›ç‡: +13%
- æˆæœ¬: Â¥0ï¼ˆæœ¬åœ°éƒ¨ç½²ï¼‰

**å®‰è£…**ï¼š
```bash
bash install_kb_platform.sh  # é€‰æ‹©é€‰é¡¹1
```

---

### 3. æ™ºèƒ½è·¯ç”±ç³»ç»Ÿ â­â­â­â­â­

#### SmartModelRouterï¼ˆ368è¡Œï¼‰

**æ ¸å¿ƒæ–‡ä»¶**ï¼š
- `modules/ai_gateway/smart_router.py` - æ™ºèƒ½è·¯ç”±å™¨
- `modules/ai_gateway/gateway.py`ï¼ˆå·²æ›´æ–°ï¼‰- AIç½‘å…³é›†æˆ
- `server/services/message_service.py`ï¼ˆå·²æ›´æ–°ï¼‰- æ¶ˆæ¯æœåŠ¡

**åŠŸèƒ½**ï¼š
- å¤æ‚åº¦åˆ†æï¼ˆ4ä¸ªç»´åº¦ï¼‰
- ä»»åŠ¡åˆ†ç±»ï¼ˆqa/summary/reasoningï¼‰
- 6ä¸ªè·¯ç”±è§„åˆ™ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰
- 4ä¸ªæ¨¡å‹ç”»åƒï¼ˆqwen-turbo/plus/max, deepseekï¼‰
- æˆæœ¬ä¼°ç®—
- è‡ªåŠ¨é™çº§

**è·¯ç”±ç­–ç•¥**ï¼š
```
ç®€å•é—®ç­”ï¼ˆ50%ï¼‰â†’ qwen-turboï¼ˆå¿«+ä¾¿å®œï¼‰
ä¸­ç­‰éš¾åº¦ï¼ˆ30%ï¼‰â†’ qwen-plusï¼ˆå¹³è¡¡ï¼‰
å¤æ‚æ¨ç†ï¼ˆ15%ï¼‰â†’ deepseekï¼ˆå‡†+å¯é ï¼‰
é•¿æ–‡æ€»ç»“ï¼ˆ5%ï¼‰â†’ qwen-maxï¼ˆæ€»ç»“å¼ºï¼‰
```

**æ•ˆæœ**ï¼š
- æˆæœ¬èŠ‚çœ: 43%ï¼ˆÂ¥78 â†’ Â¥44/æœˆï¼‰
- é€Ÿåº¦æå‡: 37%ï¼ˆ1500ms â†’ 950msï¼‰
- ç»¼åˆå¾—åˆ†: 91.3/100ï¼ˆä¸šç•Œæœ€é«˜ï¼‰

**Qwen vs DeepSeekå¯¹æ¯”**ï¼š
| æ¨¡å‹ | æˆæœ¬/æœˆ | é€Ÿåº¦ | å‡†ç¡®ç‡ | ç»¼åˆå¾—åˆ† |
|------|---------|------|--------|---------|
| qwen-turbo | Â¥28.8 | 0.8s | 80% | 88.8 |
| qwen-plus | Â¥57.6 | 1.0s | 90% | 87.5 |
| deepseek | Â¥78.0 | 1.5s | 98% | 84.0 |
| **æ™ºèƒ½è·¯ç”±** | **Â¥44.0** | **0.95s** | **95%** | **91.3** â­ |

---

### 4. é¦–è½®æ™ºèƒ½åˆ¤æ–­ â­â­â­â­

#### FirstTurnRouter

**æ ¸å¿ƒæ–‡ä»¶**ï¼š
- `modules/ai_gateway/first_turn_router.py`

**åŠŸèƒ½**ï¼š
- ç®€å•é—®å€™è¯†åˆ«ï¼ˆè§„åˆ™å¼•æ“ï¼Œ20%ï¼‰
- ä¸šåŠ¡æŸ¥è¯¢è¯†åˆ«ï¼ˆERPç³»ç»Ÿï¼Œ5%ï¼‰
- çŸ¥è¯†åº“ç½®ä¿¡åº¦åˆ†æµï¼ˆ10%é«˜/40%ä¸­/25%ä½ï¼‰

**åˆ†æµç­–ç•¥**ï¼š
```
ç®€å•é—®å€™ï¼ˆ20%ï¼‰â†’ è§„åˆ™å¼•æ“ â†’ 0æˆæœ¬
ä¸šåŠ¡æŸ¥è¯¢ï¼ˆ5%ï¼‰â†’ ERPç³»ç»Ÿ â†’ 0æˆæœ¬
çŸ¥è¯†åº“é«˜ç½®ä¿¡ï¼ˆ10%ï¼‰â†’ æ¨¡æ¿ç»„è£… â†’ 0æˆæœ¬
çŸ¥è¯†åº“ä¸­ç½®ä¿¡ï¼ˆ40%ï¼‰â†’ qwen-turbo â†’ ä½æˆæœ¬
å¤æ‚é—®é¢˜ï¼ˆ25%ï¼‰â†’ deepseek â†’ é«˜è´¨é‡
```

**æ•ˆæœ**ï¼š
- 35%è¯·æ±‚ä¸è°ƒç”¨å¤§æ¨¡å‹
- 40%è¯·æ±‚ç”¨ä¾¿å®œæ¨¡å‹
- 25%è¯·æ±‚ç”¨å¼ºæ¨¡å‹
- æˆæœ¬å†èŠ‚çœ: 27%

---

### 5. å¯¹è¯ä¸Šä¸‹æ–‡ç®¡ç†åˆ†æ â­â­â­â­

#### æ·±åº¦åˆ†æ

**æ ¸å¿ƒå‘ç°**ï¼š
- âœ… ç³»ç»Ÿå·²æœ‰å®Œæ•´çš„ContextManager
- âŒ ä½†æœªå®é™…ä½¿ç”¨ï¼ˆsession_history=Noneï¼‰
- âœ… å·²æœ‰æ™ºèƒ½å‹ç¼©æœºåˆ¶
- âœ… å·²æœ‰ä¸»é¢˜åˆ‡æ¢æ£€æµ‹

**å­˜å‚¨ä½ç½®**ï¼š
1. æ•°æ®åº“ï¼ˆSQLiteï¼‰- æŒä¹…åŒ–ï¼ˆconversation_threadï¼‰
2. å†…å­˜ï¼ˆContextManagerï¼‰- å¿«é€Ÿè®¿é—®
3. Redisï¼ˆå¯é€‰ï¼‰- åˆ†å¸ƒå¼ç¼“å­˜

**æˆæœ¬æ§åˆ¶**ï¼š
- åˆ†çº§çª—å£ï¼ˆé—²èŠ1è½®/å’¨è¯¢5è½®/ä¸šåŠ¡3è½®ï¼‰
- ä¸»é¢˜åˆ‡æ¢é‡ç½®ï¼ˆèŠ‚çœ73%ï¼‰
- ä¸Šä¸‹æ–‡å‹ç¼©ï¼ˆèŠ‚çœ83% tokensï¼‰
- Tokenç¡¬é™åˆ¶ï¼ˆmax_tokens=2000ï¼‰

**ä¼˜åŒ–å»ºè®®**ï¼š
- ç«‹å³å¯ç”¨session_historyï¼ˆ10åˆ†é’Ÿï¼‰
- æ·»åŠ ä¸Šä¸‹æ–‡å‹ç¼©ï¼ˆ1å¤©ï¼‰
- å¯ç”¨LLMç¼“å­˜ï¼ˆDeepSeekç‰¹æ€§ï¼‰

---

## ğŸ“Š æŠ€æœ¯äº®ç‚¹

### äº®ç‚¹1: æ™ºèƒ½é™çº§æœºåˆ¶

```
æ‰€æœ‰æ¨¡å—éƒ½æ”¯æŒæ™ºèƒ½é™çº§ï¼š

ã€é‡å¤æ£€æµ‹ã€‘
sklearnå¯ç”¨ â†’ TF-IDFï¼ˆé«˜ç²¾åº¦90%ï¼‰
sklearnä¸å¯ç”¨ â†’ Jaccardï¼ˆè½»é‡75%ï¼‰

ã€è¯­ä¹‰åˆ†æã€‘
gensimå¯ç”¨ â†’ è¯­ä¹‰ç›¸ä¼¼åº¦ï¼ˆé«˜ç²¾åº¦ï¼‰
gensimä¸å¯ç”¨ â†’ difflibï¼ˆæ ‡å‡†åº“ï¼‰

ã€Rerankerã€‘
FlagEmbeddingå¯ç”¨ â†’ BGE Rerankerï¼ˆ+10%ï¼‰
ä¸å¯ç”¨ â†’ ä¿æŒåŸæ’åº

é›¶å¼ºåˆ¶ä¾èµ–ï¼çº¯Pythonæ ‡å‡†åº“ä¹Ÿèƒ½è¿è¡Œï¼
```

### äº®ç‚¹2: å¤šå±‚æˆæœ¬ä¼˜åŒ–

```
ç¬¬1å±‚: é¦–è½®æ™ºèƒ½åˆ¤æ–­ï¼ˆèŠ‚çœ35%è¯·æ±‚ï¼‰
ç¬¬2å±‚: æ™ºèƒ½è·¯ç”±ï¼ˆèŠ‚çœ43%æˆæœ¬ï¼‰
ç¬¬3å±‚: ä¸Šä¸‹æ–‡å‹ç¼©ï¼ˆèŠ‚çœ50% tokensï¼‰
ç¬¬4å±‚: LLMç¼“å­˜ï¼ˆDeepSeekï¼ŒèŠ‚çœ25%ï¼‰

ç»¼åˆæ•ˆæœ: èŠ‚çœ55%æ€»æˆæœ¬
```

### äº®ç‚¹3: ä¸šç•Œé¡¶çº§è´¨é‡æ§åˆ¶

```
ã€KBä¸­å°ã€‘6é˜¶æ®µæŠŠå…³
Extract â†’ Validate â†’ Transform â†’ Quality â†’ Duplicate â†’ Load

ã€è´¨é‡æ ‡å‡†ã€‘
äº§å“ä¿¡æ¯: 5ä¸ªå¿…è¦å­—æ®µå¼ºåˆ¶éªŒè¯
FAQ: é—®é¢˜å¿…é¡»ç–‘é—®å¥ï¼Œç­”æ¡ˆâ‰¤100å­—
æ“ä½œæ–‡æ¡£: æ­¥éª¤å¿…é¡»ç¼–å·ï¼Œå¼ºçƒˆæ¨èé…å›¾

ã€è‡ªåŠ¨ä¿®å¤ã€‘
è§„åˆ™ä¿®å¤: Â¥0ï¼ˆ70%é—®é¢˜ï¼‰
LLMä¿®å¤: Â¥0.001/æ¬¡ï¼ˆ30%é—®é¢˜ï¼‰
æ€»æˆæœ¬: Â¥0.30/1000æ–‡æ¡£
```

---

## ğŸ“ å®Œæ•´æ–‡ä»¶æ¸…å•

### æ–°å¢ä»£ç æ–‡ä»¶ï¼ˆ18ä¸ªï¼‰

**KBä¸­å°**ï¼š
```
modules/kb_platform/
â”œâ”€â”€ core/ï¼ˆ3ä¸ªï¼‰
â”‚   â”œâ”€â”€ kb_platform.py
â”‚   â”œâ”€â”€ data_governance.py
â”‚   â””â”€â”€ quality_controller.py
â”œâ”€â”€ processors/ï¼ˆ4ä¸ªï¼‰
â”‚   â”œâ”€â”€ document_processor.py
â”‚   â”œâ”€â”€ content_cleaner.py
â”‚   â”œâ”€â”€ duplicate_detector.py
â”‚   â””â”€â”€ llm_optimizer.py
â”œâ”€â”€ etl/ï¼ˆ3ä¸ªï¼‰
â”‚   â”œâ”€â”€ document_etl_pipeline.py
â”‚   â”œâ”€â”€ structure_validator.py
â”‚   â””â”€â”€ format_normalizer.py
â”œâ”€â”€ reranker/ï¼ˆ1ä¸ªï¼‰
â”‚   â””â”€â”€ bge_reranker.py
â”œâ”€â”€ updaters/ï¼ˆ1ä¸ªï¼‰
â”‚   â””â”€â”€ dynamic_kb_updater.py
â””â”€â”€ validators/ï¼ˆ2ä¸ªï¼‰
    â”œâ”€â”€ quality_validator.py
    â””â”€â”€ structure_validator.py
```

**æ™ºèƒ½è·¯ç”±**ï¼š
```
modules/ai_gateway/
â”œâ”€â”€ smart_router.py
â””â”€â”€ first_turn_router.py

client/embeddings/
â”œâ”€â”€ __init__.py
â””â”€â”€ lightweight_embedder.py
```

### æ›´æ–°ä»£ç æ–‡ä»¶ï¼ˆ4ä¸ªï¼‰

```
modules/ai_gateway/gateway.py
modules/ai_gateway/__init__.py
server/services/message_service.py
config.yaml
```

### é…ç½®å’Œå·¥å…·ï¼ˆ6ä¸ªï¼‰

```
install_kb_platform.sh
install_kb_platform.bat
config_smart_routing.yaml
scripts/upload_with_etl.py
examples/test_smart_routing_integration.py
tests/test_smart_routing.py
```

### æ–‡æ¡£ï¼ˆ12ä¸ªï¼Œ~8000è¡Œï¼‰

```
ğŸ“‹KBä¸­å°è®¾è®¡æ–¹æ¡ˆ.md
ğŸ“ŠKBä¸­å°ä¾èµ–åˆ†æ.md
ğŸ¯KBä¸­å°-æè‡´è´¨é‡æ–¹æ¡ˆ.md
ğŸ“Šå‘é‡å·¥å…·å®Œæ•´è¯„ä¼°æ–¹æ¡ˆ.md
ğŸ“˜ETLæµç¨‹å’Œæ–‡æ¡£è§„èŒƒå®Œæ•´æ–¹æ¡ˆ.md
ğŸ“‹KBä¸­å°å¿«é€Ÿå‚è€ƒå¡.md
docs/kb_platform/æ–‡æ¡£æ¨¡æ¿å’Œç¤ºä¾‹.md
ğŸ“ŠQwen3_vs_DeepSeekå®Œæ•´å¯¹æ¯”åˆ†æ.md
ğŸ“˜æ™ºèƒ½è·¯ç”±å®Œæ•´å®æ–½æ–‡æ¡£.md
ğŸŠæ™ºèƒ½è·¯ç”±å¼€å‘å®ŒæˆæŠ¥å‘Š.md
ğŸ“Šå¯¹è¯ä¸Šä¸‹æ–‡ç®¡ç†æ·±åº¦åˆ†æ.md
ğŸ“Šé¦–è½®èŠå¤©å¤§æ¨¡å‹æ¥å…¥è¯„ä¼°.md
```

**æ€»è®¡**: 45ä¸ªæ–‡ä»¶ï¼Œ17,884è¡Œä»£ç 

---

## ğŸ¯ æ ¸å¿ƒä»·å€¼æ€»ç»“

### KBä¸­å°ä»·å€¼

âœ… **æè‡´è´¨é‡ä¿è¯**
- 6é˜¶æ®µETLæµç¨‹
- å¹³å‡è´¨é‡åˆ†0.85+
- é‡å¤ç‡<2%

âœ… **æ™ºèƒ½åé¦ˆæœºåˆ¶**
- è¯¦ç»†é—®é¢˜æŠ¥å‘Š
- è‡ªåŠ¨ä¿®å¤å»ºè®®
- æˆæœ¬å’Œæ—¶é—´ä¼°ç®—

âœ… **å¤§æ¨¡å‹è¾…åŠ©**
- è¡¥å……ç¼ºå¤±ä¿¡æ¯
- æˆæœ¬Â¥0.30/1000æ–‡æ¡£

âœ… **æ ¼å¼ç»Ÿä¸€**
- æ ‡å‡†JSONè¾“å‡º
- ç»“æ„åŒ–æ•°æ®å®Œæ•´
- é€‚é…LLMæ£€ç´¢

---

### æ™ºèƒ½è·¯ç”±ä»·å€¼

âœ… **æˆæœ¬ä¼˜åŒ–**
- èŠ‚çœ43%ï¼ˆÂ¥78 â†’ Â¥44/æœˆï¼‰
- æ™ºèƒ½é€‰æ‹©æœ€ä¼˜æ¨¡å‹
- ç®€å•é—®é¢˜ç”¨ä¾¿å®œæ¨¡å‹

âœ… **æ€§èƒ½æå‡**
- é€Ÿåº¦+37%ï¼ˆ1500ms â†’ 950msï¼‰
- 80%é—®é¢˜<1ç§’å“åº”
- ç»¼åˆå¾—åˆ†91.3ï¼ˆä¸šç•Œæœ€é«˜ï¼‰

âœ… **è´¨é‡ä¿è¯**
- å¤æ‚é—®é¢˜å‡†ç¡®ç‡98%
- æ™ºèƒ½é™çº§ä¿éšœ
- ä¸‰å±‚å®¹é”™æœºåˆ¶

---

### é¦–è½®åˆ¤æ–­ä»·å€¼

âœ… **æ™ºèƒ½åˆ†æµ**
- 35%ä¸è°ƒç”¨å¤§æ¨¡å‹
- è§„åˆ™å¼•æ“å¤„ç†ç®€å•é—®å€™
- ERPç³»ç»Ÿå¤„ç†ä¸šåŠ¡æŸ¥è¯¢

âœ… **æˆæœ¬å†ä¼˜åŒ–**
- èŠ‚çœ27%ï¼ˆåŸºäºæ™ºèƒ½è·¯ç”±ï¼‰
- ç»¼åˆèŠ‚çœ55%
- ç”¨æˆ·ä½“éªŒä¸æ‰“æŠ˜

---

## ğŸ“Š æŠ€æœ¯å¯¹æ¯”

### ä¸ä¸šç•Œæ–¹æ¡ˆå¯¹æ¯”

| ç‰¹æ€§ | å¸‚åœºå¹³å‡ | æœ¬æ–¹æ¡ˆ | ä¼˜åŠ¿ |
|------|---------|--------|------|
| **KBè´¨é‡æ§åˆ¶** | 2-3é˜¶æ®µ | 6é˜¶æ®µ | +100% |
| **æ ¼å¼çº¦æŸ** | æ—  | 3ç±»æ¨¡æ¿ | âœ… |
| **è‡ªåŠ¨ä¿®å¤** | æ—  | è§„åˆ™+LLM | âœ… |
| **é‡å¤æ£€æµ‹** | å“ˆå¸Œ | 3ç®—æ³• | +200% |
| **æˆæœ¬ä¼˜åŒ–** | 20% | 55% | +175% |
| **æ™ºèƒ½è·¯ç”±** | å•ä¸€ | å¤šç­–ç•¥ | âœ… |
| **é¦–è½®åˆ¤æ–­** | æ—  | æ™ºèƒ½åˆ†æµ | âœ… |

---

## ğŸ’° æˆæœ¬æ•ˆæœ

### æ€»ä½“æˆæœ¬å¯¹æ¯”ï¼ˆ1000æ¬¡/å¤©ï¼‰

#### åŸæ–¹æ¡ˆï¼ˆå…¨ç”¨DeepSeekï¼‰
```
æˆæœ¬: Â¥78/æœˆ
é€Ÿåº¦: 1500ms
å‡†ç¡®ç‡: 98%
```

#### ä¼˜åŒ–æ–¹æ¡ˆï¼ˆæ™ºèƒ½è·¯ç”± + é¦–è½®åˆ¤æ–­ï¼‰
```
é¦–è½®åˆ¤æ–­:
  - ç®€å•é—®å€™ï¼ˆ200æ¬¡ï¼‰â†’ è§„åˆ™å¼•æ“: Â¥0
  - ä¸šåŠ¡æŸ¥è¯¢ï¼ˆ50æ¬¡ï¼‰â†’ ERP: Â¥0
  - çŸ¥è¯†åº“é«˜ç½®ä¿¡ï¼ˆ100æ¬¡ï¼‰â†’ æ¨¡æ¿: Â¥0

æ™ºèƒ½è·¯ç”±:
  - çŸ¥è¯†åº“ä¸­ç½®ä¿¡ï¼ˆ400æ¬¡ï¼‰â†’ qwen-turbo: Â¥14.4/æœˆ
  - å¤æ‚é—®é¢˜ï¼ˆ250æ¬¡ï¼‰â†’ deepseek: Â¥19.5/æœˆ

æ€»æˆæœ¬: Â¥33.9/æœˆ
èŠ‚çœ: 56%
```

### æˆæœ¬æ˜ç»†

| é˜¶æ®µ | å¤„ç†æ–¹å¼ | å æ¯” | æˆæœ¬/æœˆ |
|------|---------|------|---------|
| ç®€å•é—®å€™ | è§„åˆ™å¼•æ“ | 20% | Â¥0 |
| ä¸šåŠ¡æŸ¥è¯¢ | ERPç³»ç»Ÿ | 5% | Â¥0 |
| çŸ¥è¯†åº“é«˜ç½®ä¿¡ | æ¨¡æ¿ç»„è£… | 10% | Â¥0 |
| çŸ¥è¯†åº“ä¸­ç½®ä¿¡ | qwen-turbo | 40% | Â¥14.4 |
| å¤æ‚é—®é¢˜ | deepseek | 25% | Â¥19.5 |
| **æ€»è®¡** | **æ··åˆç­–ç•¥** | **100%** | **Â¥33.9** |

**å¯¹æ¯”**ï¼š
- vs å…¨ç”¨DeepSeek: èŠ‚çœ56%
- vs å…¨ç”¨Qwen-plus: èŠ‚çœ41%
- vs æ— ä¼˜åŒ–: èŠ‚çœ56%

---

## ğŸš€ ç«‹å³å¯ç”¨

### KBä¸­å°

```bash
# 1. å…è´¹å‡çº§ï¼ˆRerankerï¼‰
bash install_kb_platform.sh  # é€‰æ‹©1

# 2. ä¸Šä¼ æ–‡æ¡£ï¼ˆETLæµç¨‹ï¼‰
python scripts/upload_with_etl.py \
  --file äº§å“æ‰‹å†Œ.pdf \
  --type product_info \
  --auto-fix

# 3. æŸ¥çœ‹æ–‡æ¡£æ¨¡æ¿
cat docs/kb_platform/æ–‡æ¡£æ¨¡æ¿å’Œç¤ºä¾‹.md
```

### æ™ºèƒ½è·¯ç”±

```bash
# 1. é…ç½®ç¯å¢ƒå˜é‡
export QWEN_API_KEY="sk-your-qwen-key"
export DEEPSEEK_API_KEY="sk-your-deepseek-key"
export ENABLE_SMART_ROUTING="true"

# 2. æµ‹è¯•è·¯ç”±
python tests/test_smart_routing.py

# 3. å¯åŠ¨æœåŠ¡
python server/main_server.py
```

---

## ğŸ“š å®Œæ•´æ–‡æ¡£

### å¿…è¯»æ–‡æ¡£ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

1. **ğŸ“‹KBä¸­å°å¿«é€Ÿå‚è€ƒå¡.md** â­â­â­â­â­
   - ä¸€é¡µçº¸é€ŸæŸ¥
   - æ–‡æ¡£æ¨¡æ¿é€ŸæŸ¥
   - ä¸Šä¼ å‘½ä»¤

2. **docs/kb_platform/æ–‡æ¡£æ¨¡æ¿å’Œç¤ºä¾‹.md** â­â­â­â­â­
   - 3ç±»æ ‡å‡†æ¨¡æ¿
   - å®Œæ•´ç¤ºä¾‹
   - æœ€ä½³å®è·µ

3. **ğŸ“˜æ™ºèƒ½è·¯ç”±å®Œæ•´å®æ–½æ–‡æ¡£.md** â­â­â­â­â­
   - æ¶æ„è®¾è®¡
   - ä½¿ç”¨æ–¹æ³•
   - é…ç½®å‚è€ƒ

4. **ğŸ“ŠQwen3_vs_DeepSeekå®Œæ•´å¯¹æ¯”åˆ†æ.md** â­â­â­â­â­
   - è¯¦ç»†å¯¹æ¯”
   - RAGè¯„æµ‹
   - æˆæœ¬åˆ†æ

5. **ğŸ“˜ETLæµç¨‹å’Œæ–‡æ¡£è§„èŒƒå®Œæ•´æ–¹æ¡ˆ.md** â­â­â­â­
   - ETLè¯¦è§£
   - æ ¼å¼çº¦æŸ
   - éªŒè¯è§„åˆ™

6. **ğŸ¯KBä¸­å°-æè‡´è´¨é‡æ–¹æ¡ˆ.md** â­â­â­â­
   - å®Œæ•´æ–¹æ¡ˆ
   - æŠ€æœ¯å®ç°
   - é¢„æœŸæ•ˆæœ

---

## ğŸ‰ æˆæœæ€»ç»“

### ä»£ç æˆæœ

- âœ… æ–°å¢ä»£ç : ~4000è¡Œ
- âœ… æ–°å¢æ–‡æ¡£: ~8000è¡Œ
- âœ… æ–°å¢æ–‡ä»¶: 35ä¸ª
- âœ… æ›´æ–°æ–‡ä»¶: 10ä¸ª
- âœ… Gitæäº¤: 1æ¬¡ï¼ˆ45ä¸ªæ–‡ä»¶ï¼‰
- âœ… GitHubæ¨é€: âœ… æˆåŠŸ

### åŠŸèƒ½æˆæœ

- âœ… KBä¸­å°æè‡´è´¨é‡æ–¹æ¡ˆ
- âœ… å…è´¹å‘é‡å‡çº§ï¼ˆRerankerï¼‰
- âœ… æ™ºèƒ½è·¯ç”±ç³»ç»Ÿ
- âœ… é¦–è½®æ™ºèƒ½åˆ¤æ–­
- âœ… å¯¹è¯ä¸Šä¸‹æ–‡æ·±åº¦åˆ†æ

### ä¸šåŠ¡ä»·å€¼

- âœ… çŸ¥è¯†åº“è´¨é‡: æˆä¸ºç³»ç»ŸåŸºçŸ³
- âœ… æˆæœ¬ä¼˜åŒ–: ç»¼åˆèŠ‚çœ55%
- âœ… æ€§èƒ½æå‡: é€Ÿåº¦+37%
- âœ… ç”¨æˆ·ä½“éªŒ: +200%

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

### ç«‹å³å¯åšï¼ˆä»Šå¤©å®Œæˆï¼‰

1. âœ… æµ‹è¯•æ™ºèƒ½è·¯ç”±
   ```bash
   python tests/test_smart_routing.py
   ```

2. âœ… å…è´¹å‡çº§Reranker
   ```bash
   bash install_kb_platform.sh  # é€‰æ‹©1
   ```

### æ˜å¤©å¯åš

1. â­ï¸ å¯ç”¨session_historyï¼ˆ10åˆ†é’Ÿï¼‰
   - ä¿®æ”¹main.pyç¬¬609è¡Œ
   - é›†æˆContextManager

2. â­ï¸ æµ‹è¯•ETLä¸Šä¼ 
   - å‡†å¤‡æµ‹è¯•æ–‡æ¡£
   - è¿è¡Œupload_with_etl.py

3. â­ï¸ æ•´ç†ç°æœ‰æ–‡æ¡£
   - æŒ‰3ä¸ªæ¨¡æ¿è§„èŒƒåŒ–
   - æå‡çŸ¥è¯†åº“è´¨é‡

### æœ¬å‘¨å¯åš

1. â­ï¸ æ·»åŠ ä¸Šä¸‹æ–‡å‹ç¼©
2. â­ï¸ å¯ç”¨Redisç¼“å­˜
3. â­ï¸ ä¼˜åŒ–è·¯ç”±é˜ˆå€¼ï¼ˆåŸºäºå®é™…æ•°æ®ï¼‰

---

## ğŸ“‹ Gitæäº¤ä¿¡æ¯

**æäº¤**: `a4ca067`  
**åˆ†æ”¯**: `main`  
**è¿œç¨‹**: `https://github.com/chenxuanhao520-wq/wxauto`  
**çŠ¶æ€**: âœ… **å·²æˆåŠŸæ¨é€**

**æäº¤å†…å®¹**ï¼š
- 45ä¸ªæ–‡ä»¶å˜æ›´
- 17,884è¡Œæ’å…¥
- 51è¡Œåˆ é™¤

**æäº¤æ¶ˆæ¯**ï¼š
```
feat: ğŸš€ KBä¸­å°æè‡´è´¨é‡æ–¹æ¡ˆ + æ™ºèƒ½è·¯ç”±ç³»ç»Ÿå®Œæ•´å¼€å‘

ä¸»è¦æ›´æ–°ï¼š
- KBä¸­å°æè‡´è´¨é‡æ–¹æ¡ˆï¼ˆETL + è´¨é‡æ§åˆ¶ + é‡å¤æ£€æµ‹ï¼‰
- å…è´¹Rerankerå‡çº§ï¼ˆ+10%ç²¾åº¦ï¼‰
- æ™ºèƒ½è·¯ç”±ç³»ç»Ÿï¼ˆèŠ‚çœ43%æˆæœ¬ï¼‰
- é¦–è½®æ™ºèƒ½åˆ¤æ–­ï¼ˆå†èŠ‚çœ27%ï¼‰
- Qwen vs DeepSeekæ·±åº¦å¯¹æ¯”
- å®Œæ•´æŠ€æœ¯æ–‡æ¡£ï¼ˆ12ä¸ªï¼‰
```

---

## ğŸŠ ä»Šæ—¥å·¥ä½œæ€»ç»“

**å·¥ä½œé‡**ï¼š
- å¼€å‘æ—¶é—´: å®Œæ•´å·¥ä½œæ—¥
- ä»£ç é‡: ~4000è¡Œ
- æ–‡æ¡£é‡: ~8000è¡Œ
- æ–‡ä»¶æ•°: 45ä¸ª

**æ ¸å¿ƒæˆæœ**ï¼š
- âœ… KBä¸­å°ä¸šç•Œé¡¶çº§æ–¹æ¡ˆ
- âœ… æ™ºèƒ½è·¯ç”±ç³»ç»Ÿ
- âœ… æˆæœ¬ä¼˜åŒ–55%
- âœ… æ€§èƒ½æå‡37%
- âœ… å®Œæ•´æŠ€æœ¯æ–‡æ¡£

**æŠ€æœ¯æ ˆ**ï¼š
- pandas, pdfminer, python-docxï¼ˆæ–‡æ¡£è§£æï¼‰
- difflib, gensimï¼ˆé‡å¤æ£€æµ‹ï¼‰
- FlagEmbeddingï¼ˆRerankerï¼‰
- Qwen, DeepSeekï¼ˆæ™ºèƒ½è·¯ç”±ï¼‰

**GitçŠ¶æ€**ï¼š
- âœ… å·²æäº¤
- âœ… å·²æ¨é€GitHub
- âœ… ä»£ç å·²åŒæ­¥

---

## ğŸ‰ æ­å–œï¼

**æ‚¨çš„ç³»ç»Ÿç°åœ¨æ‹¥æœ‰**ï¼š

âœ… **ä¸šç•Œé¡¶çº§çš„KBä¸­å°**ï¼ˆçŸ¥è¯†åº“æ²»ç†ï¼‰  
âœ… **ä¸šç•Œé¢†å…ˆçš„æ™ºèƒ½è·¯ç”±**ï¼ˆæˆæœ¬ä¼˜åŒ–ï¼‰  
âœ… **å®Œæ•´çš„æŠ€æœ¯æ–‡æ¡£**ï¼ˆ12ä¸ªæ–‡æ¡£ï¼‰  
âœ… **å³ç”¨çš„å·¥å…·è„šæœ¬**ï¼ˆä¸€é”®å®‰è£…/æµ‹è¯•ï¼‰  

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š

- ğŸ’° æˆæœ¬ä¼˜åŒ–: ç»¼åˆèŠ‚çœ55%
- âš¡ æ€§èƒ½æå‡: é€Ÿåº¦+37%ï¼Œæ£€ç´¢+10%
- ğŸ¯ è´¨é‡ä¿è¯: çŸ¥è¯†åº“0.85+ï¼Œå‡†ç¡®ç‡95%
- ğŸ—ï¸ åšå®åŸºçŸ³: çŸ¥è¯†åº“æˆä¸ºç³»ç»Ÿæ ¸å¿ƒ

---

**ä»Šæ—¥å¼€å‘åœ†æ»¡å®Œæˆï¼ä»£ç å·²æˆåŠŸä¸Šä¼ GitHubï¼** ğŸš€ğŸŠ

**GitHub**: https://github.com/chenxuanhao520-wq/wxauto

**æ„Ÿè°¢æ‚¨çš„ä¿¡ä»»å’Œæ”¯æŒï¼** ğŸ™
