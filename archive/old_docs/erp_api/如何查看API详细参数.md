# 如何查看 API 详细参数

由于智邦国际 ERP 的 API 文档是**动态加载**的，每个接口的详细参数（字段名、数据类型、示例）需要在浏览器中查看。

---

## 🔍 方法一：浏览器查看（推荐）

### 步骤

1. **登录系统**
   ```
   http://ls1.jmt.ink:46088/
   ```

2. **打开API文档**
   ```
   http://ls1.jmt.ink:46088/sysn/view/OpenApi/help.ashx
   ```

3. **查找目标API**
   - 左侧导航树展开模块
   - 点击具体的API名称（如"获取客户列表"）
   - 右侧会显示详细文档

4. **查看参数说明**
   - 请求参数表格
   - 响应参数表格
   - 示例代码
   - 字段说明

### 示例：查看"获取客户列表"参数

点击左侧导航：
```
销售栏目 → 客户管理 → 客户对接 → 获取客户列表
```

右侧会显示：
- **接口地址**: `/webapi/v3/ov1/salesmanage/custom/list`
- **请求方式**: POST
- **请求参数**: 
  | 参数名 | 类型 | 必填 | 说明 |
  |--------|------|------|------|
  | pageIndex | int | 否 | 页码 |
  | pageSize | int | 否 | 每页数量 |
  | ... | ... | ... | ... |
- **响应参数**:
  | 参数名 | 类型 | 说明 |
  |--------|------|------|
  | id | string | 客户ID |
  | name | string | 客户名称 |
  | source | string | 客户来源 |
  | ... | ... | ... |

---

## 📋 方法二：保存完整网页（推荐）

如果需要离线查看或批量查看：

### 步骤

1. **在浏览器中导航到目标API**
   - 例如："获取客户列表"

2. **保存网页**
   ```
   右键 → 另存为 → 选择"网页，全部" 
   ```
   或按 `Ctrl+S` (Windows) / `Cmd+S` (Mac)

3. **保存位置**
   ```
   docs/erp_api/details/获取客户列表.html
   ```

4. **双击HTML文件即可离线查看**

---

## 🛠️ 方法三：使用开发者工具抓取

如果需要批量获取参数：

### 步骤

1. **打开开发者工具**
   ```
   F12 → Network 标签
   ```

2. **点击API文档链接**
   - 在左侧导航点击"获取客户列表"

3. **查看Network请求**
   - 找到返回API详情的请求
   - 查看 Response 内容
   - 这里包含了完整的参数说明（JSON或HTML格式）

4. **复制响应内容**
   - 可能需要解析JSON或HTML

---

## 💡 快速查询常见字段

根据智邦国际ERP的命名规范，以下是常见字段名：

### 客户相关

| 字段名 | 说明 | 示例值 |
|--------|------|--------|
| `id` | 客户ID | "12345" |
| `name` | 客户名称 | "张三公司" |
| `telname` | 客户简称 | "张三" |
| `source` | 客户来源 | "微信"、"网络"、"电话" |
| `sort` | 客户类型 | 1=单位客户, 2=个人客户 |
| `linkman` | 联系人 | "张经理" |
| `tel` | 电话 | "13800138000" |
| `address` | 地址 | "重庆市渝中区" |
| `remark` | 备注 | "重要客户" |
| `charge` | 负责人ID | "1001" |
| `chargename` | 负责人姓名 | "李销售" |
| `addtime` | 添加时间 | "2025-01-01 10:00:00" |
| `status` | 状态 | 0=待审核, 1=已审核 |

### 分页参数

| 字段名 | 说明 | 默认值 |
|--------|------|--------|
| `pageindex` 或 `pageIndex` | 页码（从1开始） | 1 |
| `pagesize` 或 `pageSize` | 每页数量 | 20 |
| `total` | 总记录数（返回值） | - |

### 搜索参数

| 字段名 | 说明 | 示例值 |
|--------|------|--------|
| `keyword` | 关键词搜索 | "张三" |
| `starttime` | 开始时间 | "2025-01-01" |
| `endtime` | 结束时间 | "2025-12-31" |
| `sort` | 排序字段 | "addtime" |
| `order` | 排序方式 | "desc" 或 "asc" |

### 响应格式

```json
{
  "success": true,              // 是否成功
  "message": "操作成功",         // 提示信息
  "data": {                     // 数据
    "list": [...],              // 列表数据
    "total": 100,               // 总数
    "pageIndex": 1,             // 当前页
    "pageSize": 20              // 每页数量
  },
  "code": 200                   // 状态码
}
```

---

## 📝 实际示例：获取客户列表

### 1. 在浏览器中查看文档

访问并登录：
```
http://ls1.jmt.ink:46088/sysn/view/OpenApi/help.ashx
```

点击：`销售栏目 → 客户管理 → 客户对接 → 获取客户列表`

### 2. 查看完整参数说明

右侧会显示类似：

**请求参数**:
- `pageindex`: 页码（int，可选）
- `pagesize`: 每页数量（int，可选）
- `keyword`: 搜索关键词（string，可选）
- `sort`: 客户类型（int，可选，1=单位 2=个人）
- `charge`: 负责人ID（string，可选）
- `starttime`: 开始时间（string，可选）
- `endtime`: 结束时间（string，可选）

**响应字段**:
- `id`: 客户ID
- `name`: 客户名称
- `telname`: 客户简称
- `source`: **客户来源** ⭐（这就是您要的字段）
- `linkman`: 联系人
- `tel`: 电话
- ... 等等

### 3. 测试请求

```python
import requests

response = requests.post(
    'http://ls1.jmt.ink:46088/webapi/v3/ov1/salesmanage/custom/list',
    headers={'Cookie': 'your_cookie_here'},
    json={
        'pageindex': 1,
        'pagesize': 20,
        'keyword': '',      # 搜索关键词
        'sort': 0,          # 0=全部, 1=单位, 2=个人
        'source': '微信'     # 按来源筛选
    }
)

print(response.json())
```

---

## 🎯 针对您的问题：客户来源字段

根据智邦国际ERP的标准字段命名：

| 场景 | 字段名 | 可能的值 |
|------|--------|----------|
| **请求参数**（筛选） | `source` | "微信"、"网络"、"电话"、"展会" 等 |
| **响应参数**（数据） | `source` | 同上 |
| **添加客户时** | `source` | 自定义来源名称 |

**完整验证方法**：
1. 在浏览器中打开 "获取客户列表" 文档
2. 查看 "响应参数" 表格
3. 找到 "客户来源" 对应的字段名
4. 或者实际调用API查看返回的JSON字段名

---

## ⚡ 快速操作指南

### 如果您现在需要知道具体参数：

**立即可做**:
1. 在Chrome中打开 ERP 文档页面
2. 导航到目标API（如"获取客户列表"）
3. 截图或复制参数表格
4. 发给我，我帮您整理成文档

**或者**:
```bash
# 运行抓取工具（需要Cookie）
python tools/fetch_erp_api_details.py
```

---

## 📞 如果遇到问题

1. **无法看到参数表格**
   - 检查是否启用了JavaScript
   - 尝试刷新页面
   - 清除浏览器缓存

2. **参数名称不确定**
   - 在ERP系统中实际添加一个客户
   - 用开发者工具查看提交的表单数据
   - 字段名就是参数名

3. **需要批量获取所有API参数**
   - 联系智邦国际技术支持，索取完整API文档PDF
   - 或使用浏览器自动化工具（Selenium）批量保存

---

**建议**: 
- 先在浏览器中查看2-3个常用API的参数
- 把参数复制给我，我帮您整理成标准文档
- 后续需要其他API时再查看，不必一次性全部抓取

这样最高效！👍

