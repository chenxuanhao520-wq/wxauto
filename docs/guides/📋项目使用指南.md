# 📋 项目使用指南

## 🚀 快速开始

### 环境要求
- Python 3.8+
- Windows 系统（微信自动化需要）
- 微信PC版

### 安装依赖
```bash
pip install -r requirements.txt
```

### 启动服务
```bash
# 开发模式（无需环境变量）
python3 main.py

# 生产模式（需要环境变量）
export SUPABASE_URL="https://your-project.supabase.co"
export SUPABASE_ANON_KEY="your_supabase_anon_key"
export PINECONE_API_KEY="your_pinecone_api_key"
python3 main.py
```

### 访问服务
- **API文档**: http://localhost:8000/docs
- **健康检查**: http://localhost:8000/health
- **配置管理**: http://localhost:8000/api/v1/config/

---

## 🏗️ 系统架构

### 云原生架构
- **数据库**: Supabase (PostgreSQL)
- **向量数据库**: Pinecone
- **AI服务**: 多模型智能路由 (Qwen, GLM, OpenAI等)
- **实时同步**: WebSocket
- **配置管理**: 统一配置系统

### 核心模块
```
modules/
├── api/           # API路由层
├── storage/       # 数据存储层
├── vector/        # 向量搜索
├── embeddings/    # 嵌入服务
├── auth/          # 认证授权
├── config/        # 配置管理
├── realtime/      # 实时服务
├── ai_gateway/    # AI网关
└── rag/           # 检索增强生成
```

---

## 🔧 配置说明

### 环境变量
```bash
# Supabase配置
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# Pinecone配置
PINECONE_API_KEY=your_pinecone_api_key
PINECONE_ENVIRONMENT=us-west1-gcp-free
PINECONE_INDEX_NAME=wxauto-knowledge

# AI服务配置
QWEN_API_KEY=your_qwen_api_key
GLM_API_KEY=your_glm_api_key
OPENAI_API_KEY=your_openai_api_key
```

### 配置文件
- `config.yaml` - 主配置文件
- `env_example_unified.txt` - 环境变量示例

---

## 📱 客户端使用

### 云原生客户端
```bash
# 启动客户端
python3 client/cloud_client.py
```

### 功能特性
- 微信消息自动化
- 实时配置同步
- 本地缓存管理
- 心跳监控

---

## 🧪 测试验证

### 运行测试
```bash
# 核心逻辑测试（无需依赖）
python3 test_core_logic.py

# 完整功能测试（需要依赖）
python3 test_basic_functionality.py

# 系统测试套件
python3 test_system_suite.py
```

---

## 📚 开发指南

### API开发
- 使用FastAPI框架
- 统一的依赖注入
- 完整的API文档
- 错误处理和日志

### 数据库操作
- 统一数据库管理器
- 异步操作支持
- 多租户支持
- 实时同步

### 配置管理
- 动态配置更新
- 配置验证
- 环境变量支持
- 实时同步

---

## 🔍 故障排除

### 常见问题

1. **服务启动失败**
   - 检查Python版本 (3.8+)
   - 检查依赖安装
   - 查看启动日志

2. **数据库连接失败**
   - 检查Supabase配置
   - 验证网络连接
   - 查看错误日志

3. **API访问失败**
   - 检查服务是否启动
   - 验证端口占用
   - 查看API文档

### 日志查看
```bash
# 查看服务日志
tail -f logs/server.log
```

---

## 📖 更多文档

- `docs/` - 详细文档
- `README.md` - 项目说明
- `CHANGELOG.md` - 更新日志

---

## 🆘 技术支持

如有问题，请查看：
1. 项目文档
2. 测试用例
3. 错误日志
4. API文档
