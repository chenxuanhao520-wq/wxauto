# ğŸ” æ–‡ä»¶ç§»åŠ¨åä»£ç å®ç°å½±å“åˆ†ææŠ¥å‘Š

## ğŸ“‹ **æ£€æŸ¥ç»“æœ**

âŒ **æ–‡ä»¶ç§»åŠ¨ç¡®å®å½±å“äº†ä»£ç å®ç°ï¼éœ€è¦ä¿®å¤ä»¥ä¸‹é—®é¢˜ï¼š**

### ğŸ¯ **å‘ç°çš„é—®é¢˜**

1. **ä¾èµ–åŒ…ç¼ºå¤±** âŒ
   - `supabase` æœªå®‰è£…
   - `pinecone-client` æœªå®‰è£…  
   - `psycopg2-binary` æœªå®‰è£…

2. **APIæ¨¡å—ä¾èµ–å‡½æ•°æœªå®šä¹‰** âŒ
   - `get_config_manager_dep` æœªå®šä¹‰
   - `get_database_manager_dep` æœªå®šä¹‰

3. **å¯¼å…¥è·¯å¾„é—®é¢˜** âŒ
   - å¤šä¸ªæ¨¡å—å› ç¼ºå°‘ä¾èµ–è€Œå¯¼å…¥å¤±è´¥

---

## ğŸ”§ **å…·ä½“é—®é¢˜åˆ†æ**

### **1. ä¾èµ–åŒ…é—®é¢˜**

**é—®é¢˜**: æ–‡ä»¶ç§»åŠ¨åï¼Œä¾èµ–åŒ…æ²¡æœ‰å®‰è£…
```bash
âŒ supabase æœªå®‰è£…
âŒ pinecone-client æœªå®‰è£…  
âŒ psycopg2-binary æœªå®‰è£…
```

**å½±å“**: 
- æ— æ³•å¯¼å…¥Supabaseç›¸å…³æ¨¡å—
- æ— æ³•å¯¼å…¥Pineconeç›¸å…³æ¨¡å—
- æ— æ³•è¿æ¥PostgreSQLæ•°æ®åº“

### **2. APIæ¨¡å—ä¾èµ–å‡½æ•°é—®é¢˜**

**é—®é¢˜**: APIæ¨¡å—ä¸­ä½¿ç”¨äº†æœªå®šä¹‰çš„ä¾èµ–å‡½æ•°
```python
# modules/api/config.py
config_manager: ConfigManager = Depends(get_config_manager_dep)  # âŒ æœªå®šä¹‰

# modules/api/tenants.py  
db_manager: UnifiedDatabaseManager = Depends(get_database_manager_dep)  # âŒ æœªå®šä¹‰
```

**å½±å“**:
- FastAPIæ— æ³•æ­£ç¡®æ³¨å†Œè·¯ç”±
- ä¾èµ–æ³¨å…¥ç³»ç»Ÿå¤±æ•ˆ
- APIç«¯ç‚¹æ— æ³•æ­£å¸¸å·¥ä½œ

### **3. å¯¼å…¥è·¯å¾„é—®é¢˜**

**é—®é¢˜**: å¤šä¸ªæ¨¡å—å› ç¼ºå°‘ä¾èµ–è€Œå¯¼å…¥å¤±è´¥
```python
âŒ modules.api.messages: No module named 'supabase'
âŒ modules.auth.supabase_auth: No module named 'supabase'
âŒ modules.realtime.supabase_realtime: No module named 'supabase'
```

**å½±å“**:
- ä¸»åº”ç”¨æ— æ³•å¯åŠ¨
- æ ¸å¿ƒåŠŸèƒ½æ¨¡å—æ— æ³•åŠ è½½
- ç³»ç»Ÿå®Œå…¨ä¸å¯ç”¨

---

## ğŸ› ï¸ **ä¿®å¤æ–¹æ¡ˆ**

### **æ–¹æ¡ˆ1: å®‰è£…ä¾èµ–åŒ…**

```bash
# è¿›å…¥backendç›®å½•
cd backend

# å®‰è£…æ‰€æœ‰ä¾èµ–
pip install -r requirements.txt

# æˆ–è€…å•ç‹¬å®‰è£…å…³é”®ä¾èµ–
pip install supabase pinecone-client psycopg2-binary
```

### **æ–¹æ¡ˆ2: ä¿®å¤APIæ¨¡å—ä¾èµ–å‡½æ•°**

éœ€è¦åœ¨APIæ¨¡å—ä¸­å®šä¹‰ç¼ºå¤±çš„ä¾èµ–å‡½æ•°ï¼š

```python
# modules/api/config.py
def get_config_manager_dep():
    return get_config_manager()

# modules/api/tenants.py
def get_database_manager_dep():
    return get_database_manager()
```

### **æ–¹æ¡ˆ3: æ£€æŸ¥å¯¼å…¥è·¯å¾„**

ç¡®ä¿æ‰€æœ‰æ¨¡å—çš„å¯¼å…¥è·¯å¾„æ­£ç¡®ï¼š

```python
# ç¡®ä¿åœ¨backendç›®å½•ä¸­è¿è¡Œ
# ç¡®ä¿Pythonè·¯å¾„åŒ…å«å½“å‰ç›®å½•
import sys
from pathlib import Path
sys.path.insert(0, str(Path.cwd()))
```

---

## ğŸ“Š **å½±å“ç¨‹åº¦è¯„ä¼°**

| é—®é¢˜ç±»å‹ | å½±å“ç¨‹åº¦ | ä¿®å¤éš¾åº¦ | ä¼˜å…ˆçº§ |
|----------|----------|----------|--------|
| **ä¾èµ–åŒ…ç¼ºå¤±** | ğŸ”´ ä¸¥é‡ | ğŸŸ¢ ç®€å• | ğŸ”´ é«˜ |
| **APIä¾èµ–å‡½æ•°** | ğŸ”´ ä¸¥é‡ | ğŸŸ¡ ä¸­ç­‰ | ğŸ”´ é«˜ |
| **å¯¼å…¥è·¯å¾„** | ğŸŸ¡ ä¸­ç­‰ | ğŸŸ¢ ç®€å• | ğŸŸ¡ ä¸­ |

### **æ€»ä½“å½±å“**
- **ç³»ç»Ÿå¯ç”¨æ€§**: âŒ å®Œå…¨ä¸å¯ç”¨
- **å¼€å‘è¿›åº¦**: âŒ ä¸¥é‡å—é˜»
- **éƒ¨ç½²èƒ½åŠ›**: âŒ æ— æ³•éƒ¨ç½²

---

## ğŸš€ **ä¿®å¤æ­¥éª¤**

### **æ­¥éª¤1: å®‰è£…ä¾èµ–**
```bash
cd backend
pip install -r requirements.txt
```

### **æ­¥éª¤2: ä¿®å¤APIæ¨¡å—**
```bash
# æ£€æŸ¥å¹¶ä¿®å¤APIæ¨¡å—ä¸­çš„ä¾èµ–å‡½æ•°å®šä¹‰
```

### **æ­¥éª¤3: æµ‹è¯•ä¿®å¤ç»“æœ**
```bash
cd backend
python3 -c "from modules.api.messages import router; print('âœ… ä¿®å¤æˆåŠŸ')"
```

### **æ­¥éª¤4: å¯åŠ¨æœåŠ¡æµ‹è¯•**
```bash
cd backend
python3 main.py
```

---

## ğŸ“‹ **ä¿®å¤éªŒè¯**

### **éªŒè¯æ¸…å•**
- [ ] æ‰€æœ‰ä¾èµ–åŒ…å·²å®‰è£…
- [ ] APIæ¨¡å—ä¾èµ–å‡½æ•°å·²å®šä¹‰
- [ ] æ‰€æœ‰æ¨¡å—å¯¼å…¥æˆåŠŸ
- [ ] ä¸»åº”ç”¨å¯ä»¥å¯åŠ¨
- [ ] APIç«¯ç‚¹å¯ä»¥è®¿é—®
- [ ] å‰ç«¯å¯ä»¥è¿æ¥åç«¯

### **æµ‹è¯•å‘½ä»¤**
```bash
# æµ‹è¯•åç«¯
cd backend && python3 main.py

# æµ‹è¯•å‰ç«¯
cd frontend && npm install && npm run dev

# æµ‹è¯•API
curl http://localhost:8000/api/v1/health
```

---

## ğŸ¯ **æ€»ç»“**

**æ–‡ä»¶ç§»åŠ¨ç¡®å®å½±å“äº†ä»£ç å®ç°**ï¼Œä¸»è¦é—®é¢˜æ˜¯ï¼š

1. **ä¾èµ–åŒ…ç¼ºå¤±** - éœ€è¦å®‰è£…supabaseç­‰ä¾èµ–
2. **APIä¾èµ–å‡½æ•°æœªå®šä¹‰** - éœ€è¦è¡¥å……ç¼ºå¤±çš„å‡½æ•°å®šä¹‰
3. **å¯¼å…¥è·¯å¾„é—®é¢˜** - éœ€è¦ç¡®ä¿æ­£ç¡®çš„Pythonè·¯å¾„

**ä¿®å¤ä¼˜å…ˆçº§**:
1. ğŸ”´ **ç«‹å³ä¿®å¤**: å®‰è£…ä¾èµ–åŒ…
2. ğŸ”´ **ç«‹å³ä¿®å¤**: ä¿®å¤APIæ¨¡å—ä¾èµ–å‡½æ•°
3. ğŸŸ¡ **åç»­ä¼˜åŒ–**: å®Œå–„å¯¼å…¥è·¯å¾„å’Œé”™è¯¯å¤„ç†

**ä¿®å¤åé¢„æœŸ**:
- âœ… ç³»ç»Ÿå¯ä»¥æ­£å¸¸å¯åŠ¨
- âœ… æ‰€æœ‰APIç«¯ç‚¹å¯ä»¥è®¿é—®
- âœ… å‰åç«¯å¯ä»¥æ­£å¸¸é€šä¿¡
- âœ… å¼€å‘ç¯å¢ƒå®Œå…¨å¯ç”¨

---

**ğŸ”§ å»ºè®®ç«‹å³æ‰§è¡Œä¿®å¤æ­¥éª¤ï¼Œç¡®ä¿ç³»ç»Ÿå¯ä»¥æ­£å¸¸è¿è¡Œï¼**
