# 🗺️ 项目导航地图

**一图看懂整个项目的所有资源**

---

## 🎯 我要...

### 快速开始

```
我要快速启动系统 → START_HERE.md (5分钟)
                  ↓
              启动服务器: ./start_server.sh
                  ↓
              启动客户端: ./start_client.sh
                  ↓
                完成！
```

### 了解架构

```
我要理解架构设计 → 🏗️架构设计-C-S分离方案.md (917行)
                  ↓
              查看项目结构: PROJECT_STRUCTURE_V2.md
                  ↓
              查看代码: client/ 和 server/
```

### 部署上线

```
我要部署到生产环境 → 📘C-S架构部署指南.md
                    ↓
                docs/guides/INSTALLATION.md
                    ↓
                docker-compose up -d
```

### 开发扩展

```
我要开发新功能 → API文档: http://localhost:8000/docs
                ↓
              查看代码示例: server/services/
                ↓
              运行测试: pytest tests/
```

---

## 📚 文档分类索引

### 🚀 入门文档 (必读)

| 文档 | 用途 | 阅读时间 | 重要度 |
|------|------|---------|--------|
| [README.md](README.md) | 项目总览 | 5分钟 | ⭐⭐⭐⭐⭐ |
| [START_HERE.md](START_HERE.md) | 快速开始 | 10分钟 | ⭐⭐⭐⭐⭐ |
| [📘C-S架构部署指南.md](📘C-S架构部署指南.md) | 部署指南 | 20分钟 | ⭐⭐⭐⭐⭐ |

### 🏗️ 架构文档 (深入了解)

| 文档 | 用途 | 阅读时间 | 重要度 |
|------|------|---------|--------|
| [🏗️架构设计-C-S分离方案.md](🏗️架构设计-C-S分离方案.md) | 完整架构设计 | 1小时 | ⭐⭐⭐⭐⭐ |
| [PROJECT_STRUCTURE_V2.md](PROJECT_STRUCTURE_V2.md) | 项目结构 | 15分钟 | ⭐⭐⭐⭐ |
| [🎉C-S架构重构完成报告.md](🎉C-S架构重构完成报告.md) | 重构报告 | 10分钟 | ⭐⭐⭐ |
| [🎊架构重构最终报告.md](🎊架构重构最终报告.md) | 最终报告 | 15分钟 | ⭐⭐⭐⭐ |

### 📖 使用指南

| 文档 | 用途 | 位置 |
|------|------|------|
| 快速开始 | 详细教程 | [docs/guides/快速开始.md](docs/guides/快速开始.md) |
| 安装指南 | 详细安装 | [docs/guides/INSTALLATION.md](docs/guides/INSTALLATION.md) |
| AI模型配置 | LLM配置 | [docs/guides/LLM_PROVIDERS.md](docs/guides/LLM_PROVIDERS.md) |
| 多模态支持 | 语音图片 | [docs/guides/MULTIMODAL_SUPPORT.md](docs/guides/MULTIMODAL_SUPPORT.md) |
| Windows部署 | Windows环境 | [docs/guides/WINDOWS_DEPLOYMENT.md](docs/guides/WINDOWS_DEPLOYMENT.md) |

### 🎨 功能文档

| 文档 | 功能 | 位置 |
|------|------|------|
| 智能上下文管理 | Token优化 | [docs/features/智能对话上下文管理方案.md](docs/features/智能对话上下文管理方案.md) |
| 会话超时管理 | 会话生命周期 | [docs/features/会话超时管理方案对比.md](docs/features/会话超时管理方案对比.md) |
| 闭环学习系统 | 自动学习 | [docs/features/智能对话闭环学习系统-增强方案.md](docs/features/智能对话闭环学习系统-增强方案.md) |
| 知识库方案 | RAG检索 | [docs/features/KNOWLEDGE_BASE_SOLUTION.md](docs/features/KNOWLEDGE_BASE_SOLUTION.md) |
| 客户中台 | 客户管理 | [docs/features/CUSTOMER_HUB_GUIDE.md](docs/features/CUSTOMER_HUB_GUIDE.md) |

### 🔌 集成文档

| 文档 | 集成对象 | 位置 |
|------|---------|------|
| ERP同步系统 | 智邦国际 | [docs/integrations/ERP同步系统README.md](docs/integrations/ERP同步系统README.md) |
| ERP API文档 | API清单 | [docs/erp_api/智邦ERP_API完整索引.md](docs/erp_api/智邦ERP_API完整索引.md) |
| 多维表格集成 | 飞书/钉钉 | [docs/integrations/MULTITABLE_INTEGRATION.md](docs/integrations/MULTITABLE_INTEGRATION.md) |

---

## 💻 代码导航

### 客户端代码

| 模块 | 文件 | 功能 |
|------|------|------|
| **主程序** | `client/main_client.py` | 客户端入口 ⭐ |
| 微信自动化 | `client/agent/wx_automation.py` | UI操作 |
| 服务器通信 | `client/api/server_client.py` | API调用 |
| 本地缓存 | `client/cache/local_cache.py` | 加密缓存 |
| 心跳监控 | `client/monitor/heartbeat.py` | 状态上报 |

### 服务器代码

| 模块 | 文件 | 功能 |
|------|------|------|
| **主程序** | `server/main_server.py` | FastAPI应用 ⭐ |
| **核心服务** | `server/services/message_service.py` | 业务逻辑 ⭐ |
| 认证API | `server/api/auth.py` | JWT认证 |
| 消息API | `server/api/messages.py` | 消息处理 |
| 心跳API | `server/api/heartbeat.py` | 心跳接收 |
| 统计API | `server/api/stats.py` | 数据统计 |

### 共享模块

| 模块 | 路径 | 功能 |
|------|------|------|
| AI网关 | `modules/ai_gateway/` | 7个LLM提供商 |
| 知识库 | `modules/rag/` | 向量检索 |
| 数据库 | `modules/storage/` | SQLAlchemy |
| ERP同步 | `modules/erp_sync/` | 智邦国际 |
| 上下文管理 | `modules/conversation_context/` | Token优化 |
| 自动学习 | `modules/learning_loop/` | Q&A学习 |

---

## 🛠️ 配置文件

| 文件 | 用途 | 位置 |
|------|------|------|
| `client_config.yaml` | 客户端配置 | `client/config/` |
| `config.yaml` | 主配置 | 项目根目录 |
| `.env` | 环境变量 | 项目根目录（需创建） |
| `docker-compose.yml` | Docker配置 | 项目根目录 |

---

## 🚀 启动脚本

| 脚本 | 用途 | 平台 |
|------|------|------|
| `start_server.sh` | 启动服务器 | Mac/Linux |
| `start_server.bat` | 启动服务器 | Windows |
| `start_client.sh` | 启动客户端 | Mac/Linux |
| `start_client.bat` | 启动客户端 | Windows |

---

## 🧪 测试文件

```
tests/
├── test_system_enhancements.py    # 系统增强 (10个测试) ⭐
├── test_db.py                     # 数据库 (12个测试)
├── test_rag_routing.py            # 知识库 (13个测试)
├── test_customer_system.py        # 客户管理 (3个测试)
└── ...

总计: 52个测试，96%通过率
```

---

## 📊 数据库

### 表结构

```sql
messages            # 消息记录
sessions            # 会话信息
customers           # 客户信息
learned_knowledge   # 学习的知识点
knowledge_review_queue  # 待审核知识
error_logs          # 错误日志
```

### 工具

```bash
# 检查数据库
python scripts/check_db.py

# 导出数据
python scripts/export_data.py
```

---

## 🌐 API端点

### 认证

```
POST /api/v1/auth/login       # 登录
POST /api/v1/auth/refresh     # 刷新Token
```

### 消息

```
POST /api/v1/messages         # 上报消息
GET  /api/v1/messages/:id/reply  # 获取回复
POST /api/v1/send             # 主动发送
```

### 监控

```
POST /api/v1/heartbeat        # 心跳
GET  /api/v1/agents/status    # 客户端状态
POST /api/v1/errors           # 错误上报
```

### 统计

```
GET /api/v1/stats             # 系统统计
GET /api/v1/stats/messages    # 消息统计
GET /api/v1/stats/customers   # 客户统计
```

---

## 🔧 工具脚本

| 脚本 | 功能 | 位置 |
|------|------|------|
| `check_db.py` | 数据库检查 | `scripts/` |
| `kb_manager.py` | 知识库管理 | `scripts/` |
| `upload_documents.py` | 文档上传 | `scripts/` |
| `start_erp_sync.py` | ERP同步 | `scripts/` |

---

## 📦 依赖管理

### 客户端依赖 (轻量)

```
requirements_client.txt
├── httpx              # HTTP客户端
├── cryptography       # AES加密
├── pyyaml             # YAML配置
└── psutil             # 系统监控
```

### 服务器依赖 (完整)

```
requirements_server.txt
├── fastapi            # Web框架
├── uvicorn            # ASGI服务器
├── sqlalchemy         # ORM
├── pyjwt              # JWT认证
├── redis              # 缓存
├── psycopg2-binary    # PostgreSQL
└── 其他业务依赖...
```

---

## 🎓 学习路径

### 路径1: 使用者（1小时）

```
1. START_HERE.md (10分钟)
2. 启动服务器和客户端 (20分钟)
3. 测试消息处理 (20分钟)
4. 查看Web界面 (10分钟)
```

### 路径2: 开发者（1天）

```
1. 🏗️架构设计-C-S分离方案.md (1小时)
2. 阅读核心代码 (3小时)
3. API文档学习 (1小时)
4. 修改和测试 (3小时)
```

### 路径3: 架构师（3天）

```
Day 1: 架构理解
  • 所有架构文档
  • 代码全览
  • 数据流分析

Day 2: 部署实践
  • Docker部署
  • 性能测试
  • 监控配置

Day 3: 优化扩展
  • 性能优化
  • 高可用方案
  • 扩展设计
```

---

## 🎨 快速查找

### 我要找...

#### 配置相关

- 客户端配置: `client/config/client_config.yaml`
- 服务器配置: `.env` 或环境变量
- AI模型配置: [docs/guides/LLM_PROVIDERS.md](docs/guides/LLM_PROVIDERS.md)
- 知识库配置: `config.yaml` 中的 `knowledge_base` 部分

#### 代码相关

- 客户端主程序: `client/main_client.py`
- 服务器主程序: `server/main_server.py`
- 核心业务逻辑: `server/services/message_service.py`
- 微信自动化: `client/agent/wx_automation.py`

#### 部署相关

- Docker部署: `docker-compose.yml`
- 启动脚本: `start_server.sh` / `start_client.sh`
- 环境要求: [docs/guides/INSTALLATION.md](docs/guides/INSTALLATION.md)

#### 故障排查

- 客户端日志: `logs/client.log`
- 服务器日志: `logs/server.log`
- 错误处理: `core/error_handler.py`
- 故障排查指南: [📘C-S架构部署指南.md](📘C-S架构部署指南.md#故障排查)

---

## 📊 项目统计

### 代码统计

```
总文件数: 120+
Python文件: 80+
文档文件: 75+
配置文件: 10+

总代码行数: ~16,000行
- client: 952行
- server: 769行  
- modules: 8,000行
- core: 2,500行
- web: 1,000行
- tests: 800行
- 其他: 2,000行

文档总字数: ~80,000字
```

### 功能统计

```
AI模型: 7个
知识库格式: 5种 (PDF/Word/Excel/Markdown/TXT)
ERP API: 158个
多维表格: 2种 (飞书/钉钉)
测试用例: 52个
监控指标: 20+
```

---

## 🎯 版本历史

| 版本 | 日期 | 重大更新 |
|------|------|---------|
| v1.0 | 2025-01-05 | 初始版本 |
| v1.1 | 2025-01-10 | 知识库+AI |
| v1.2 | 2025-01-15 | 客户中台 |
| v1.3 | 2025-01-18 | 上下文管理 |
| **v2.0** | **2025-01-19** | **C/S架构** ⭐ |

查看详细更新: [CHANGELOG.md](CHANGELOG.md)

---

## 🔗 常用链接

### 在线资源

- **API文档**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc
- **健康检查**: http://localhost:8000/api/v1/health
- **统计数据**: http://localhost:8000/api/v1/stats
- **Web界面**: http://localhost:5000

### 代码仓库

- **GitHub**: https://github.com/chenxuanhao520-wq/wxauto
- **Issues**: https://github.com/chenxuanhao520-wq/wxauto/issues

---

## 🆘 帮助资源

### 按问题类型

| 问题 | 查看 |
|------|------|
| 安装问题 | docs/guides/INSTALLATION.md |
| 配置问题 | client_config.yaml 注释 |
| 连接问题 | 📘C-S架构部署指南.md |
| AI不工作 | docs/guides/LLM_PROVIDERS.md |
| 性能问题 | core/performance_optimizer.py |
| 部署问题 | docker-compose.yml |

### 按角色

| 角色 | 推荐资源 |
|------|---------|
| **新用户** | START_HERE.md |
| **运维** | 📘C-S架构部署指南.md |
| **开发** | 🏗️架构设计-C-S分离方案.md |
| **架构** | 所有架构文档 |

---

## 🎁 额外资源

### 报告文档

- [🏆系统梳理完成-全栈工程师报告.md](🏆系统梳理完成-全栈工程师报告.md)
- [📊全栈工程师工作总结.md](📊全栈工程师工作总结.md)
- [📘系统完整梳理文档.md](📘系统完整梳理文档.md)
- [✅代码重构完成报告.md](✅代码重构完成报告.md)

### 历史文档

存档在 `archive/old_docs/` 目录

---

## 📍 项目地图

```
你在这里 → 🗺️项目导航地图.md

├─ 快速开始 → START_HERE.md
├─ 项目总览 → README.md
├─ 架构设计 → 🏗️架构设计-C-S分离方案.md
├─ 部署指南 → 📘C-S架构部署指南.md
├─ 详细文档 → docs/README.md
│
├─ 客户端代码 → client/
├─ 服务器代码 → server/
├─ 业务模块 → modules/
└─ 核心功能 → core/
```

---

## ✨ 快捷命令

```bash
# 启动服务器
./start_server.sh

# 启动客户端  
./start_client.sh

# Docker部署
docker-compose up -d

# 运行测试
pytest tests/ -v

# 查看日志
tail -f logs/server.log
tail -f logs/client.log

# 检查API
curl http://localhost:8000/api/v1/health
```

---

## 🎊 总结

这份导航地图涵盖了项目的**所有资源**：

- ✅ 13个核心文档
- ✅ 75+个详细文档
- ✅ 19个代码文件（C/S架构）
- ✅ 80+个业务模块
- ✅ 52个测试用例
- ✅ 完整的部署方案

**无论您是新手、开发者还是架构师，都能快速找到需要的资源！**

---

**导航地图版本**: v2.0  
**最后更新**: 2025-01-19  
**维护状态**: ✅ 活跃维护

